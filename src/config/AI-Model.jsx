import { GoogleGenerativeAI } from "@google/generative-ai";


const apiKey = import.meta.env.VITE_GEMINI_API_KEY;
const genAI = new GoogleGenerativeAI(apiKey);

const model = genAI.getGenerativeModel({
    model: "gemini-2.0-flash",
});

const generationConfig = {
    temperature: 1,
    topP: 0.95,
    topK: 40,
    maxOutputTokens: 8192,
    responseMimeType: "application/json",
};

export const chatSession = model.startChat({
    generationConfig,
    history: [
        {
            role: "user",
            parts: [
                { text: "Generate a Trip itinerary for 3 days trip to  Location : Darjeeling , for Couple , within a cheap budget. List all hotels with HotelName , hotel address , price,  hotel image url, geo coordinates, rating , descriptions , and suggest the itinerary with placeName, place details, place image url, geo coordinates, ticket pricing, rating , time taken to travel for each location for 3 days and  with each day plan suggest best time to visit , Remember all have to cover in the Cheap level budget. Important: give the result in JSON Format" },
            ],
        },
        {
            role: "model",
            parts: [
                { text: "```json\n{\n  \"tripName\": \"Darjeeling Budget Getaway for Couples (3 Days)\",\n  \"location\": \"Darjeeling, India\",\n  \"budgetLevel\": \"Cheap\",\n  \"coupleTrip\": true,\n  \"currency\": \"INR\",\n  \"hotels\": [\n    {\n      \"hotelName\": \"Hotel Sonam Delek\",\n      \"hotelAddress\": \"Dr. Zakir Hussain Road, Darjeeling, West Bengal 734101\",\n      \"price\": ₹800 - ₹1500 per night,\n      \"hotelImageURL\": \"https://example.com/hotel_sonam_delek.jpg\",\n      \"geoCoordinates\": {\n        \"latitude\": 27.0408,\n        \"longitude\": 88.2675\n      },\n      \"rating\": 3.8,\n      \"description\": \"A budget-friendly hotel in a central location, offering basic amenities and clean rooms. Great for exploring the city on foot.\"\n    },\n   {\n      \"hotelName\": \"Hotel Dekeling\",\n      \"hotelAddress\": \"Chowrasta, Darjeeling, West Bengal 734101, India\",\n      \"price\": \"₹1000 - ₹1800 per night\",\n        \"hotelImageURL\": \"https://dynamic-media-cdn.tripadvisor.com/media/photo-o/0c/73/b2/f3/photo0jpg.jpg?w=500&h=300&s=1\",\n      \"geoCoordinates\": {\n        \"latitude\": 27.0403,\n        \"longitude\": 88.2655\n      },\n      \"rating\": 4.0,\n      \"description\": \"Another budget-conscious option with a great location near Chowrasta. Offers clean rooms, friendly service, and a rooftop terrace.\"\n    },\n   {\n      \"hotelName\": \"Hotel Seven Seventeen\",\n      \"hotelAddress\": \"Near Gorkha Dukha Niwarak Sammelan Hall, Darjeeling, West Bengal 734101\",\n      \"price\": ₹700 - ₹1200 per night,\n      \"hotelImageURL\": \"https://example.com/hotel_seven_seventeen.jpg\",\n      \"geoCoordinates\": {\n        \"latitude\": 27.0430,\n        \"longitude\": 88.2640\n      },\n      \"rating\": 3.5,\n      \"description\": \"Simple and affordable option with basic rooms. Offers decent value for money, though it's a little away from the main Chowk.\"\n    }\n  ],\n  \"itinerary\": {\n    \"day1\": {\n      \"theme\": \"Sunrise Views & Local Exploration\",\n      \"bestTimeToVisit\": \"Early Morning (for sunrise), Afternoon\",\n      \"activities\": [\n        {\n          \"placeName\": \"Tiger Hill\",\n          \"placeDetails\": \"Famous for its panoramic view of Mount Kanchenjunga and Mount Everest at sunrise. Be prepared for crowds.\",\n          \"placeImageURL\": \"https://example.com/tiger_hill.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 27.0634,\n            \"longitude\": 88.2676\n          },\n          \"ticketPricing\": 50,\n          \"rating\": 4.5,\n          \"timeTakenToTravel\": \"1 hour (from Darjeeling town)\",\n          \"notes\": \"Wake up early (around 3:30 AM) to get there in time for the sunrise. Dress warmly.\"\n        },\n        {\n          \"placeName\": \"Ghoom Monastery\",\n          \"placeDetails\": \"One of the oldest Tibetan Buddhist monasteries in Darjeeling. Admire the architecture and serene atmosphere.\",\n          \"placeImageURL\": \"https://example.com/ghoom_monastery.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 27.0457,\n            \"longitude\": 88.2585\n          },\n          \"ticketPricing\": 20,\n          \"rating\": 4.0,\n          \"timeTakenToTravel\": \"15 minutes (from Tiger Hill)\",\n          \"notes\": \"Located near Tiger Hill, making it convenient to visit after the sunrise.\"\n        },\n        {\n          \"placeName\": \"Batasia Loop\",\n          \"placeDetails\": \"A scenic railway loop offering 360-degree views of Darjeeling. The Gorkha War Memorial is also located here.\",\n          \"placeImageURL\": \"https://example.com/batasia_loop.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 27.0375,\n            \"longitude\": 88.2538\n          },\n          \"ticketPricing\": 15,\n          \"rating\": 3.8,\n          \"timeTakenToTravel\": \"5 minutes (from Ghoom Monastery)\",\n          \"notes\": \"Take a ride on the toy train if you're interested (separate ticket).  Good for photos.\"\n        },\n        {\n          \"placeName\": \"Chowk Bazaar\",\n          \"placeDetails\": \"A bustling local market where you can experience the local culture, shop for souvenirs, and sample street food.\",\n          \"placeImageURL\": \"https://example.com/chowk_bazaar.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 27.0402,\n            \"longitude\": 88.2665\n          },\n          \"ticketPricing\": 0,\n          \"rating\": 3.5,\n          \"timeTakenToTravel\": \"15 minutes (from Batasia Loop)\",\n          \"notes\": \"Bargain while shopping. Try local snacks like momos and thukpa. Be aware of pickpockets.\"\n        }\n      ]\n    },\n    \"day2\": {\n      \"theme\": \"Tea Gardens & Mountain Views\",\n      \"bestTimeToVisit\": \"Morning, Afternoon\",\n      \"activities\": [\n        {\n          \"placeName\": \"Happy Valley Tea Estate\",\n          \"placeDetails\": \"One of the oldest tea estates in Darjeeling. Take a tour to learn about the tea-making process.\",\n          \"placeImageURL\": \"https://example.com/happy_valley_tea_estate.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 27.0435,\n            \"longitude\": 88.2544\n          },\n          \"ticketPricing\": 50,\n          \"rating\": 4.2,\n          \"timeTakenToTravel\": \"20 minutes (from Darjeeling town)\",\n          \"notes\": \"Buy fresh tea leaves directly from the factory. The walk down to the estate is pleasant, but steep.\"\n        },\n        {\n          \"placeName\": \"Padmaja Naidu Himalayan Zoological Park\",\n          \"placeDetails\": \"Home to rare and endangered animals like the red panda, snow leopard, and Tibetan wolf.\",\n          \"placeImageURL\": \"https://example.com/zoo_darjeeling.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 27.0533,\n            \"longitude\": 88.2658\n          },\n          \"ticketPricing\": 100,\n          \"rating\": 4.0,\n          \"timeTakenToTravel\": \"15 minutes (from Happy Valley Tea Estate)\",\n          \"notes\": \"Located close to the Himalayan Mountaineering Institute, so you can combine the visits. Wear comfortable shoes as you'll be walking a lot.\"\n        },\n        {\n          \"placeName\": \"Himalayan Mountaineering Institute\",\n          \"placeDetails\": \"A museum dedicated to mountaineering history and equipment. Offers insights into the challenges of climbing in the Himalayas.\",\n          \"placeImageURL\": \"https://example.com/hmi_darjeeling.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 27.0535,\n            \"longitude\": 88.2665\n          },\n          \"ticketPricing\": 80,\n          \"rating\": 3.9,\n          \"timeTakenToTravel\": \"Walking distance from the zoo\",\n          \"notes\": \"See the mountaineering equipment and the interesting history.  Check opening timings before visiting.\"\n        }\n      ]\n    },\n    \"day3\": {\n      \"theme\": \"Spiritual Sites & Departure\",\n      \"bestTimeToVisit\": \"Morning\",\n      \"activities\": [\n        {\n          \"placeName\": \"Peace Pagoda\",\n          \"placeDetails\": \"A Japanese-style pagoda offering stunning views of the Himalayas and a peaceful atmosphere.\",\n          \"placeImageURL\": \"https://example.com/peace_pagoda.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 27.0491,\n            \"longitude\": 88.2735\n          },\n          \"ticketPricing\": 0,\n          \"rating\": 4.3,\n          \"timeTakenToTravel\": \"30 minutes (by shared jeep)\",\n          \"notes\": \"Remove your shoes before entering the pagoda. A great place for meditation and reflection.\"\n        },\n        {\n          \"placeName\": \"Nightingale Park\",\n          \"placeDetails\": \"A beautiful park with gardens, sculptures, and a Shivalaya temple. Enjoy the serene environment before departing.\",\n          \"placeImageURL\": \"https://example.com/nightingale_park.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 27.0374,\n            \"longitude\": 88.2693\n          },\n          \"ticketPricing\": 50,\n          \"rating\": 3.7,\n          \"timeTakenToTravel\": \"15 minutes (by shared jeep)\",\n          \"notes\": \"Relax and enjoy the greenery before heading back. Check for any cultural performances happening in the park.\"\n        },\n        {\n          \"placeName\": \"St. Andrew's Church\",\n          \"placeDetails\": \"A historic church with beautiful architecture and stained-glass windows.\",\n          \"placeImageURL\": \"https://example.com/st_andrews_church.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 27.0421,\n            \"longitude\": 88.2673\n          },\n          \"ticketPricing\": 0,\n          \"rating\": 4.1,\n          \"timeTakenToTravel\": \"Walking distance (close to Chowk)\",\n          \"notes\": \"A peaceful place for a quick visit before departing for the airport/station.\"\n        }\n      ]\n    }\n  },\n    \"transportationNotes\": \"Shared jeeps are the most budget-friendly option for getting around Darjeeling. Negotiate the price before boarding. Walking is also a great way to explore the city center.\",\n    \"foodRecommendations\": \"Try local restaurants near Chowk Bazaar for affordable and delicious meals. Momo and Thukpa are must-try dishes.\",\n  \"budgetEstimation\": {\n      \"hotel\": 2100,\n      \"transportation\": 800,\n      \"food\": 1500,\n      \"activities\": 600,\n       \"miscellaneous\": 500,\n    \"total\": 5500,\n    \"estimationNote\": \"This is an approximate budget, and actual expenses may vary. Remember to negotiate prices wherever possible.\"\n  }\n}\n```" },
            ],
        },


    ],
});
